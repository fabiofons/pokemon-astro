---
import type { GetStaticPaths } from "astro";
import MainLayout from "../../layouts/MainLayout.astro";
import PokemonCard from "../../components/pokemon/PokemonCard.astro";

export const getStaticPaths = (() => {
  
  return [
    {params: {
      name: 'bulbasaur'}, 
      props: {url: 'https://pokeapi.co/api/v2/pokemon/1/', name: 'bulbasaur'}
    },
    {params: {
      name: 'charmander'}, 
      props: {url: 'https://pokeapi.co/api/v2/pokemon/4/', name: 'charmander'}
    },
    {params: {
      name: 'raticate'}, 
      props: {url: 'https://pokeapi.co/api/v2/pokemon/20/', name: 'raticate'}
    }
  ];
}) satisfies GetStaticPaths;

const { name } = Astro.params;
const { url } = Astro.props;
const id = url.split('/').at(-2);
const audioSrc = `https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${id}.ogg`
---

<MainLayout title="Pokemon name">
  <section class='flex flex-col mt-10 mx-10 items-center justify-center'>
    <div>
      <a href='/'>
        Regresar
      </a>
      <h2 class='capitalize text-5xl'>{name}</h2>
    </div>
    <PokemonCard name={name} url={url}/>
    <audio controls>
      <source src={audioSrc} type='audio/ogg'/>
      Your browser does not support the audio element
    </audio>
  </section>

</MainLayout>

<style>
  a {
    @apply hover:underline text-blue-500
  }
</style>